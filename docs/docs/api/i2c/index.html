<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<link href="https://unpkg.com/prismjs@1.20.0/themes/prism.css" rel="stylesheet">
<link rel="stylesheet" href="/styles/main.css">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

<!-- jquery -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<!-- google fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="crossorigin">
<link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400;1,700&family=Source+Sans+3:ital,wght@0,400;0,600;0,700;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet">
    <title>Kaluma</title>
  </head>
  <body>
    <nav class="doc-sidebar">
      <div class="p-3 border-bottom">
        <a href="/"><img src="/images/kaluma-logo.png" width="32px"></a>
        Kaluma Documentation
      </div>
      <aside class="p-3" style="overflow-y: auto; height: 100%;">
        <nav class="navbar-collapse collapse collapse-horizontal show" id="docs-nav">
          <ul class="list-unstyled">
            
              <li>
                <a href="/docs/">Introduction</a>
              </li>
            
              <li>
                <a href="/docs/getting-started/">Getting Started</a>
              </li>
            
              <li>
                <a href="/docs/cli/">CLI</a>
              </li>
            
              <li>
                <a href="/docs/ecmascript-compatibility/">ECMAScript Compatibility</a>
              </li>
            
              <li>
                <a href="/docs/getting_started/">Get Start</a>
              </li>
            
              <li>
                <a href="/docs/ide/">IDE</a>
              </li>
            
              <li>
                <a href="/docs/repl/">REPL</a>
              </li>
            
            <br>
            <h6>BOARDS</h6>
            
              <li>
                <a href="/docs/boards/raspberry-pi-pico/">RP2040 (Raspberry Pi Pico)</a>
              </li>
            
            <br>
            <h6>API</h6>
            
              <li>
                <a href="/docs/api/adc/">ADC</a>
              </li>
            
              <li>
                <a href="/docs/api/analog_io/">Analog I/O</a>
              </li>
            
              <li>
                <a href="/docs/api/at-command/">AT Command</a>
              </li>
            
              <li>
                <a href="/docs/api/board/">Board</a>
              </li>
            
              <li>
                <a href="/docs/api/button/">Button</a>
              </li>
            
              <li>
                <a href="/docs/api/console/">Console</a>
              </li>
            
              <li>
                <a href="/docs/api/device_driver/">Device Driver</a>
              </li>
            
              <li>
                <a href="/docs/api/digital_io/">Digital I/O</a>
              </li>
            
              <li>
                <a href="/docs/api/errors/">Errors</a>
              </li>
            
              <li>
                <a href="/docs/api/events/">Events</a>
              </li>
            
              <li>
                <a href="/docs/api/file-system/">File system</a>
              </li>
            
              <li>
                <a href="/docs/api/flash/">Flash</a>
              </li>
            
              <li>
                <a href="/docs/api/global/">Global</a>
              </li>
            
              <li>
                <a href="/docs/api/gpio/">GPIO</a>
              </li>
            
              <li>
                <a href="/docs/api/graphics/">Graphics</a>
              </li>
            
              <li>
                <a href="/docs/api/http/">HTTP</a>
              </li>
            
              <li>
                <a href="/docs/api/i2c/">I2C</a>
              </li>
            
              <li>
                <a href="/docs/api/interrupts/">Interrupts</a>
              </li>
            
              <li>
                <a href="/docs/api/led/">LED</a>
              </li>
            
              <li>
                <a href="/docs/api/net/">Net</a>
              </li>
            
              <li>
                <a href="/docs/api/path/">Path</a>
              </li>
            
              <li>
                <a href="/docs/api/process/">Process</a>
              </li>
            
              <li>
                <a href="/docs/api/pwm/">PWM</a>
              </li>
            
              <li>
                <a href="/docs/api/rp2/">RP2</a>
              </li>
            
              <li>
                <a href="/docs/api/rtc/">RTC</a>
              </li>
            
              <li>
                <a href="/docs/api/spi/">SPI</a>
              </li>
            
              <li>
                <a href="/docs/api/storage/">Storage</a>
              </li>
            
              <li>
                <a href="/docs/api/stream/">Stream</a>
              </li>
            
              <li>
                <a href="/docs/api/timers/">Timers</a>
              </li>
            
              <li>
                <a href="/docs/api/uart/">UART</a>
              </li>
            
              <li>
                <a href="/docs/api/url/">URL</a>
              </li>
            
              <li>
                <a href="/docs/api/wifi/">Wi-Fi</a>
              </li>
            
          </ul>
        </nav>
      </aside>
    </nav>
    <div class="doc-body">
      <div class="text-end p-3 border-bottom">
        Search, versions
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#docs-nav" aria-expanded="false">=</button>
      </div>
      <main class="container d-flex justify-content-center markdown-content" style="max-width: 640px">
        <div><h1 id="i2c" tabindex="-1">I2C <a class="direct-link" href="#i2c">#</a></h1>
<p>The <code>i2c</code> module supports communication with I2C (Inter-Integrated Circuit) / TWI (Two Wire Interface) devices. Use <code>require('i2c')</code> to access this module.</p>
<blockquote>
<ul>
<li>Slave Mode is NOT supported yet.</li>
</ul>
</blockquote>
<h2 id="class%3A-i2c" tabindex="-1">Class: I2C <a class="direct-link" href="#class%3A-i2c">#</a></h2>
<p>An instances of <code>I2C</code> represents a I2C bus.</p>
<h3 id="i2c.master" tabindex="-1">I2C.MASTER <a class="direct-link" href="#i2c.master">#</a></h3>
<ul>
<li><code>&lt;number&gt;</code> = <code>0</code></li>
</ul>
<h3 id="i2c.slave" tabindex="-1">I2C.SLAVE <a class="direct-link" href="#i2c.slave">#</a></h3>
<ul>
<li><code>&lt;number&gt;</code> = <code>1</code></li>
</ul>
<h3 id="new-i2c(bus%5B%2C-options%5D)" tabindex="-1">new I2C(bus[, options]) <a class="direct-link" href="#new-i2c(bus%5B%2C-options%5D)">#</a></h3>
<ul>
<li><strong><code>bus</code></strong> <code>&lt;number&gt;</code> I2C bus number.</li>
<li>**<code>options</code>  **  <code>&lt;object&gt;</code> The object of I2C options. <em>Default values are depends on board (Check in a board page).</em>
<ul>
<li><strong><code>mode</code></strong> <code>&lt;number&gt;</code> I2C mode, <code>I2C.MASTER</code> or <code>I2C.SLAVE</code> mode. <strong>Default:</strong> <code>I2C.MASTER</code></li>
<li><strong><code>baudrate</code></strong> <code>&lt;number&gt;</code> Clock speed (bit/s) for Master mode.</li>
<li><strong><code>scl</code></strong> <code>&lt;number&gt;</code> SCL pin number.</li>
<li><strong><code>sda</code></strong> <code>&lt;number&gt;</code> SDA pin number.</li>
</ul>
</li>
<li><strong>Returns:</strong> <code>&lt;object&gt;</code> The return value is <code>I2C</code> object.</li>
</ul>
<p>Instances of the <code>I2C</code> class can be created using the <code>new</code> keyword or by calling <code>i2c.I2C()</code> as a function. A <code>RangeError</code> will be thrown if <strong><code>bus</code></strong> exceeds max bus number.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">// Create the I2C instance with master mode </span><br><span class="token keyword">const</span> <span class="token punctuation">{</span><span class="token constant">I2C</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'i2c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// open bus 0 in master mode</span><br><span class="token keyword">const</span> i2c0 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">I2C</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// read or write ...</span><br>i2c0<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// open bus 1 in master mode, full speed</span><br><span class="token keyword">const</span> i2c1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">I2C</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token constant">I2C</span><span class="token punctuation">.</span><span class="token constant">MASTER</span><span class="token punctuation">,</span> <span class="token literal-property property">baudrate</span><span class="token operator">:</span> <span class="token number">400000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// read or write ...</span><br>i2c1<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="i2c.write(data%2C-address%5B%2C-timeout%5B%2C-count%5D%5D)" tabindex="-1">i2c.write(data, address[, timeout[, count]]) <a class="direct-link" href="#i2c.write(data%2C-address%5B%2C-timeout%5B%2C-count%5D%5D)">#</a></h3>
<ul>
<li><strong><code>data</code></strong> <code>&lt;Uint8Array|string&gt;</code> Data to write.</li>
<li><strong><code>address</code></strong> <code>&lt;number&gt;</code> I2C slave address. (7bit)</li>
<li><strong><code>timeout</code></strong> <code>&lt;number&gt;</code> Timeout in milliseconds. <strong>Default:</strong> <code>5000</code>.</li>
<li><strong><code>count</code></strong> <code>&lt;number&gt;</code> Indicates how many times to write data. <strong>Default:</strong> <code>1</code></li>
<li><strong>Returns:</strong> <code>&lt;number&gt;</code> The number of bytes written, <code>-1</code> if it failed to write or timeout.</li>
</ul>
<p>This method writes data to the specified address (slave device) and returns the number of bytes written. This method can be called only in master mode.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token punctuation">{</span><span class="token constant">I2C</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'i2c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> i2c0 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">I2C</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">baudrate</span><span class="token operator">:</span> <span class="token number">50000</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// master mode 50 kbits/s</span><br><br><span class="token comment">// Writes 2 bytes as a Uint8Array</span><br><span class="token keyword">var</span> array <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0x6b</span><span class="token punctuation">,</span> <span class="token number">0x00</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>i2c0<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>array<span class="token punctuation">,</span> <span class="token number">0x68</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Writes 5 bytes as a string</span><br>i2c0<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'Hello'</span><span class="token punctuation">,</span> <span class="token number">0x68</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>i2c0<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="i2c.read(length%2C-address%5B%2C-timeout%5D)" tabindex="-1">i2c.read(length, address[, timeout]) <a class="direct-link" href="#i2c.read(length%2C-address%5B%2C-timeout%5D)">#</a></h3>
<ul>
<li><strong><code>length</code></strong> <code>&lt;number&gt;</code> Data length to read.</li>
<li><strong><code>address</code></strong> <code>&lt;number&gt;</code> I2C slave address. (7bit)</li>
<li><strong><code>timeout</code></strong> <code>&lt;number&gt;</code> Timeout in milliseconds. <strong>Default:</strong> <code>5000</code>.</li>
<li><strong>Returns:</strong> <code>&lt;Uint8Array&gt;</code> An array buffer having data read, <code>null</code> if failed to read.</li>
</ul>
<p>This method read data from the specified address (slave device) and returns an array buffer object. This method can be called only in master mode.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token punctuation">{</span><span class="token constant">I2C</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'i2c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> i2c0 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">I2C</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <br><br><span class="token comment">// Read 14 bytes from the address 0x68.</span><br><span class="token keyword">var</span> buf <span class="token operator">=</span> i2c0<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">0x68</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">if</span> <span class="token punctuation">(</span>buf<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 14</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// first byte</span><br><span class="token punctuation">}</span><br>i2c0<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="i2c.memwrite(data%2C-address%2C-memaddress%5B%2C-memaddresssize%5B%2C-timeout%5B%2C-count%5D%5D%5D)" tabindex="-1">i2c.memWrite(data, address, memAddress[, memAddressSize[, timeout[, count]]]) <a class="direct-link" href="#i2c.memwrite(data%2C-address%2C-memaddress%5B%2C-memaddresssize%5B%2C-timeout%5B%2C-count%5D%5D%5D)">#</a></h3>
<ul>
<li><strong><code>data</code></strong> <code>&lt;Uint8Array|string&gt;</code> Data to write.</li>
<li><strong><code>address</code></strong> <code>&lt;number&gt;</code> I2C slave address. (7bit)</li>
<li><strong><code>memAddress</code></strong> <code>&lt;number&gt;</code> Memory address to write.</li>
<li><strong><code>memAddressSize</code></strong> <code>&lt;number&gt;</code> Size of <code>memAddress</code>. Set <code>16</code> when <code>memAddress</code> is 16-bit address, or set <code>8</code> if <code>memAddress</code> is 8-bit address. <strong>Default:</strong> <code>8</code>.</li>
<li><strong><code>timeout</code></strong> <code>&lt;number&gt;</code> Timeout in milliseconds. <strong>Default:</strong> <code>5000</code>.</li>
<li><strong><code>count</code></strong> <code>&lt;number&gt;</code> Indicates how many times to write data. <strong>Default:</strong> <code>1</code></li>
<li><strong>Returns:</strong><code>&lt;number&gt;</code> The number of bytes written, <code>-1</code> if failed to write or timeout.</li>
</ul>
<p>This method writes data to the memory address in the specified slave device and returns the number of bytes written. This method can be called only in master mode.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token punctuation">{</span><span class="token constant">I2C</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'i2c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> i2c0 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">I2C</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Writes 2 bytes at memory address 0x10 of slave 0x68</span><br><span class="token keyword">var</span> array <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0x6b</span><span class="token punctuation">,</span> <span class="token number">0x00</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>i2c0<span class="token punctuation">.</span><span class="token function">memWrite</span><span class="token punctuation">(</span>array<span class="token punctuation">,</span> <span class="token number">0x68</span><span class="token punctuation">,</span> <span class="token number">0x10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>i2c0<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="i2c.memread(length%2C-address%2C-memaddress%5B%2C-memaddresssize%5B%2C-timeout%5D%5D)" tabindex="-1">i2c.memRead(length, address, memAddress[, memAddressSize[, timeout]]) <a class="direct-link" href="#i2c.memread(length%2C-address%2C-memaddress%5B%2C-memaddresssize%5B%2C-timeout%5D%5D)">#</a></h3>
<ul>
<li><strong><code>length</code></strong> <code>&lt;number&gt;</code> Data length to read.</li>
<li><strong><code>address</code></strong> <code>&lt;number&gt;</code> I2C slave address. (7bit)</li>
<li><strong><code>memAddress</code></strong> <code>&lt;number&gt;</code> Memory address to read.</li>
<li><strong><code>memAddressSize</code></strong> <code>&lt;number&gt;</code> Size of <code>memAddress</code>. Set <code>16</code> when <code>memAddress</code> is 16-bit address, or set <code>8</code> when <code>memAddress</code> is 8-bit address. <strong>Default:</strong> <code>8</code>.</li>
<li><strong><code>timeout</code></strong> <code>&lt;number&gt;</code> Timeout in milliseconds. <strong>Default:</strong> <code>5000</code></li>
<li><strong>Returns:</strong> <code>&lt;Uint8Array&gt;</code> A buffer having data read, <code>null</code> if failed to read.</li>
</ul>
<p>This method read data at memory address from the specified slave device and returns an array buffer object. This method can be called only in master mode.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token punctuation">{</span><span class="token constant">I2C</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'i2c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> i2c0 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">I2C</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <br><br><span class="token comment">// Read 14 bytes at memory address 0x0100 from slave 0x68</span><br><span class="token keyword">var</span> buf <span class="token operator">=</span> i2c0<span class="token punctuation">.</span><span class="token function">memRead</span><span class="token punctuation">(</span><span class="token number">0x0100</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">0x68</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">if</span> <span class="token punctuation">(</span>buf<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 14</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// first byte</span><br><span class="token punctuation">}</span><br>i2c0<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="i2c.close()" tabindex="-1">i2c.close() <a class="direct-link" href="#i2c.close()">#</a></h3>
<p>This method closes the I2C bus.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token punctuation">{</span><span class="token constant">I2C</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'i2c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> i2c0 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">I2C</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <br><br><span class="token comment">// Write or read from I2C ...</span><br><br>i2c0<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Close i2c device</span></code></pre>
</div>
      </main>
    </div>
  </body>
</html>