<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- prismjs -->
<link href="https://unpkg.com/prismjs@1.20.0/themes/prism.css" rel="stylesheet">

<!-- bootstrap-js -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

<!-- jquery -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<!-- google fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="crossorigin">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<!-- main.css -->
<link rel="stylesheet" href="/styles/main.css">
    <title>Kaluma</title>
  </head>
  <body>
    <nav class="doc-sidebar">
      <div class="doc-sidebar-header p-3 border-bottom">
        <a href="/"><img src="/images/kaluma-logo.png" width="32px"></a>
        <span class="ms-2 fw-bold">Kaluma Docs</span>
      </div>
      <aside class="doc-sidebar-nav">
        <nav class="navbar-collapse collapse collapse-horizontal show" id="docs-nav">
          <ul class="list-unstyled">
            
              <li>
                <a href="/docs/">Introduction</a>
              </li>
            
              <li>
                <a href="/docs/getting-started/">Getting Started</a>
              </li>
            
              <li>
                <a href="/docs/repl/">REPL</a>
              </li>
            
            <br>
            <div class="doc-section">Boards</div>
            
              <li>
                <a href="/docs/boards/rp2/">RP2 (Raspberry Pi Pico)</a>
              </li>
            
            <br>
            <div class="doc-section">API</div>
            
              <li>
                <a href="/docs/api/adc/">ADC</a>
              </li>
            
              <li>
                <a href="/docs/api/analog-io/">Analog I/O</a>
              </li>
            
              <li>
                <a href="/docs/api/at-command/">AT Command</a>
              </li>
            
              <li>
                <a href="/docs/api/board/">Board</a>
              </li>
            
              <li>
                <a href="/docs/api/button/">Button</a>
              </li>
            
              <li>
                <a href="/docs/api/console/">Console</a>
              </li>
            
              <li>
                <a href="/docs/api/device-driver/">Device Driver</a>
              </li>
            
              <li>
                <a href="/docs/api/digital-io/">Digital I/O</a>
              </li>
            
              <li>
                <a href="/docs/api/errors/">Errors</a>
              </li>
            
              <li>
                <a href="/docs/api/events/">Events</a>
              </li>
            
              <li>
                <a href="/docs/api/file-system/">File system</a>
              </li>
            
              <li>
                <a href="/docs/api/flash/">Flash</a>
              </li>
            
              <li>
                <a href="/docs/api/global/">Global</a>
              </li>
            
              <li>
                <a href="/docs/api/gpio/">GPIO</a>
              </li>
            
              <li>
                <a href="/docs/api/graphics/">Graphics</a>
              </li>
            
              <li>
                <a href="/docs/api/http/">HTTP</a>
              </li>
            
              <li>
                <a href="/docs/api/i2c/">I2C</a>
              </li>
            
              <li>
                <a href="/docs/api/interrupts/">Interrupts</a>
              </li>
            
              <li>
                <a href="/docs/api/led/">LED</a>
              </li>
            
              <li>
                <a href="/docs/api/net/">Net</a>
              </li>
            
              <li>
                <a href="/docs/api/path/">Path</a>
              </li>
            
              <li>
                <a href="/docs/api/process/">Process</a>
              </li>
            
              <li>
                <a href="/docs/api/pwm/">PWM</a>
              </li>
            
              <li>
                <a href="/docs/api/rp2/">RP2</a>
              </li>
            
              <li>
                <a href="/docs/api/rtc/">RTC</a>
              </li>
            
              <li>
                <a href="/docs/api/spi/">SPI</a>
              </li>
            
              <li>
                <a href="/docs/api/storage/">Storage</a>
              </li>
            
              <li>
                <a href="/docs/api/stream/">Stream</a>
              </li>
            
              <li>
                <a href="/docs/api/timers/">Timers</a>
              </li>
            
              <li>
                <a href="/docs/api/uart/">UART</a>
              </li>
            
              <li>
                <a href="/docs/api/url/">URL</a>
              </li>
            
              <li>
                <a href="/docs/api/wifi/">Wi-Fi</a>
              </li>
            
          </ul>
        </nav>
      </aside>
    </nav>
    <div class="doc-body">
      <!-- <div class="text-end p-3 border-bottom"> v1.0 <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#docs-nav" aria-expanded="false">=</button> </div> -->
      <main class="container d-flex justify-content-center markdown-content" style="padding-bottom: 5rem;">
        <div style="width: 100%">
          <h1 id="rp2" tabindex="-1">RP2 <a class="direct-link" href="#rp2">#</a></h1>
<blockquote>
<p><strong>THIS IS EXPERIMENTAL AND SUBJECT OF CHANGE</strong></p>
</blockquote>
<p>The <code>rp2</code> module includes features only for RP2 target. Use <code>require('rp2')</code> to access this module.</p>
<h2 id="dormantpins-events" tabindex="-1">dormant(pins, events) <a class="direct-link" href="#dormantpins-events">#</a></h2>
<ul>
<li><strong><code>pins</code></strong> <code>&lt;number[]&gt;</code> An array of GPIO pin numbers for wakeup.</li>
<li><strong><code>events</code></strong> <code>&lt;numbers[]&gt;</code> An array of wakeup events for the <code>pins</code> parameter. The length of pins and events should be the same.</li>
</ul>
<p>Enter dormant mode for low power consumption.</p>
<blockquote>
<p>Note that once it goes to dormant mode, the USB will be disconnected and the connection will not be recovered even when it wakes up. You need to reset the board.</p>
</blockquote>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> rp2 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'rp2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token function">pinMode</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">,</span> <span class="token constant">OUTPUT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// On-board LED</span><br><span class="token function">pinMode</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token constant">INPUT_PULLUP</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Button for dormant</span><br><span class="token function">pinMode</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token constant">INPUT_PULLUP</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Button for wakeup</span><br><br><span class="token comment">// Blinking LED</span><br><span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token function">digitalToggle</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Enter dormant when you press the button on GPIO 0.</span><br><span class="token function">setWatch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token comment">// Wakeup when falling event detected on GPIO 1.</span><br>  rp2<span class="token punctuation">.</span><span class="token function">dormant</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token constant">FALLING</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token constant">FALLING</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h2 id="object-pio" tabindex="-1">Object: PIO <a class="direct-link" href="#object-pio">#</a></h2>
<p>Constants for state machine of PIO.</p>
<h3 id="piofifojoinnone" tabindex="-1">PIO.FIFO_JOIN_NONE <a class="direct-link" href="#piofifojoinnone">#</a></h3>
<ul>
<li><code>&lt;number&gt;</code></li>
</ul>
<h3 id="piofifojointx" tabindex="-1">PIO.FIFO_JOIN_TX <a class="direct-link" href="#piofifojointx">#</a></h3>
<ul>
<li><code>&lt;number&gt;</code></li>
</ul>
<h3 id="piofifojoinrx" tabindex="-1">PIO.FIFO_JOIN_RX <a class="direct-link" href="#piofifojoinrx">#</a></h3>
<ul>
<li><code>&lt;number&gt;</code></li>
</ul>
<h3 id="pioshiftleft" tabindex="-1">PIO.SHIFT_LEFT <a class="direct-link" href="#pioshiftleft">#</a></h3>
<ul>
<li><code>&lt;number&gt;</code></li>
</ul>
<h3 id="pioshiftright" tabindex="-1">PIO.SHIFT_RIGHT <a class="direct-link" href="#pioshiftright">#</a></h3>
<ul>
<li><code>&lt;number&gt;</code></li>
</ul>
<h3 id="piotxlessthan" tabindex="-1">PIO.TX_LESSTHAN <a class="direct-link" href="#piotxlessthan">#</a></h3>
<ul>
<li><code>&lt;number&gt;</code></li>
</ul>
<h3 id="piorxlessthan" tabindex="-1">PIO.RX_LESSTHAN <a class="direct-link" href="#piorxlessthan">#</a></h3>
<ul>
<li><code>&lt;number&gt;</code></li>
</ul>
<h2 id="class-asm" tabindex="-1">Class: ASM <a class="direct-link" href="#class-asm">#</a></h2>
<p>An instances of <code>ASM</code> represents an assembly program for PIO (Programmable I/O). This object emulates the assembly language for RP2's PIO using <a href="https://en.wikipedia.org/wiki/Method_chaining">method chaining</a>.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">// hello.pio</span><br><span class="token comment">// ---------</span><br><span class="token comment">// .program hello</span><br><span class="token comment">// loop:</span><br><span class="token comment">//   pull</span><br><span class="token comment">//   out pins, 1</span><br><span class="token comment">//   jmp loop</span><br> <br><span class="token comment">// ASM object corresponds to hello.pio</span><br><span class="token keyword">const</span> asm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ASM</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>asm<br><span class="token punctuation">.</span><span class="token function">label</span><span class="token punctuation">(</span><span class="token string">'loop'</span><span class="token punctuation">)</span><br>  <span class="token punctuation">.</span><span class="token function">pull</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>  <span class="token punctuation">.</span><span class="token function">out</span><span class="token punctuation">(</span><span class="token string">'pins'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><br>  <span class="token punctuation">.</span><span class="token function">jmp</span><span class="token punctuation">(</span><span class="token string">'loop'</span><span class="token punctuation">)</span></code></pre>
<h3 id="new-asmoptions" tabindex="-1">new ASM(options) <a class="direct-link" href="#new-asmoptions">#</a></h3>
<ul>
<li><strong><code>options</code></strong> <code>&lt;object&gt;</code> An option object.
<ul>
<li><strong><code>sideset</code></strong> <code>&lt;number&gt;</code> The side-set count. Default: <code>0</code>.</li>
<li><strong><code>sidesetOpt</code></strong> <code>&lt;boolean&gt;</code> The side-set opt. Default: <code>false</code>.</li>
<li><strong><code>sidesetPindirs</code></strong> <code>&lt;boolean&gt;</code> The side-set pindirs. Default: <code>false</code>.</li>
</ul>
</li>
</ul>
<p>Instances of the ASM class can be created.</p>
<h3 id="asmjmpcond-target" tabindex="-1">asm.jmp([cond, ]target) <a class="direct-link" href="#asmjmpcond-target">#</a></h3>
<ul>
<li><strong><code>cond</code></strong> <code>&lt;string&gt;</code> One of the strings: <code>'!x'</code>, <code>'x--'</code>, <code>'!y'</code>, <code>'y--'</code>, <code>'x!=y'</code>, <code>'pin'</code>, <code>'!osre'</code>. This parameter is optional.</li>
<li><strong><code>target</code></strong> <code>&lt;string&gt;</code> The target label name where to jump.</li>
</ul>
<h3 id="asmwaitpol-src-idx-rel" tabindex="-1">asm.wait(pol, src, idx[, rel]) <a class="direct-link" href="#asmwaitpol-src-idx-rel">#</a></h3>
<ul>
<li><strong><code>pol</code></strong> <code>&lt;number&gt;</code> </li>
<li><strong><code>src</code></strong> <code>&lt;string&gt;</code> One of the strings: <code>'gpio'</code>, <code>'pin'</code>, <code>'irq'</code>.</li>
<li><strong><code>idx</code></strong> <code>&lt;number&gt;</code> </li>
<li><strong><code>rel</code></strong> <code>&lt;string&gt;</code> Use relative IRQ number if <code>'rel'</code> passed. this option works when <code>'src'</code> parameter is 'irq'.</li>
</ul>
<h3 id="asminsrc-bits" tabindex="-1"><a href="http://asm.in">asm.in</a>(src, bits) <a class="direct-link" href="#asminsrc-bits">#</a></h3>
<ul>
<li><strong><code>src</code></strong> <code>&lt;string&gt;</code> One of the strings: <code>'pins'</code>, <code>'x'</code>, <code>'y'</code>, <code>'null'</code>, <code>'isr'</code>, <code>'osr'</code>.</li>
<li><strong><code>bits</code></strong> <code>&lt;number&gt;</code> </li>
</ul>
<h3 id="asmoutdst-bits" tabindex="-1">asm.out(dst, bits) <a class="direct-link" href="#asmoutdst-bits">#</a></h3>
<ul>
<li><strong><code>dst</code></strong> <code>&lt;string&gt;</code> One of the strings: <code>'pins'</code>, <code>'x'</code>, <code>'y'</code>, <code>'null'</code>, <code>'pindirs'</code>, <code>'pc'</code>, <code>'isr'</code>, <code>'exec'</code>.</li>
<li><strong><code>bits</code></strong> <code>&lt;number&gt;</code> </li>
</ul>
<h3 id="asmpushiffull-block" tabindex="-1">asm.push([iffull[, block]]) <a class="direct-link" href="#asmpushiffull-block">#</a></h3>
<ul>
<li><strong><code>iffull</code></strong> <code>&lt;number|string&gt;</code> <code>1</code> or <code>'iffull'</code> to set iffull flag to <code>1</code>, otherwise set to <code>0</code>.</li>
<li><strong><code>block</code></strong> <code>&lt;number|string&gt;</code> <code>1</code> or <code>'block'</code> means block, otherwise non-block (recommend to use <code>'noblock'</code>). Default: <code>1</code>.</li>
</ul>
<h3 id="asmpullifempty-block" tabindex="-1">asm.pull([ifempty[, block]]) <a class="direct-link" href="#asmpullifempty-block">#</a></h3>
<ul>
<li><strong><code>ifempty</code></strong> <code>&lt;number|string&gt;</code> <code>1</code> or <code>'ifempty'</code> to set ifempty flag to <code>1</code>, otherwise set to <code>0</code>.</li>
<li><strong><code>block</code></strong> <code>&lt;number|string&gt;</code> <code>1</code> or <code>'block'</code> means block, otherwise non-block (recommend to use <code>'noblock'</code>). Default: <code>1</code>.</li>
</ul>
<h3 id="asmmovdst-src" tabindex="-1">asm.mov(dst, src) <a class="direct-link" href="#asmmovdst-src">#</a></h3>
<ul>
<li><strong><code>dst</code></strong> <code>&lt;string&gt;</code> One of the strings: <code>'pins'</code>, <code>'x'</code>, <code>'y'</code>, <code>'exec'</code>, <code>'pc'</code>, <code>'isr'</code>, <code>'osr'</code>.</li>
<li><strong><code>src</code></strong> <code>&lt;string&gt;</code> One of the strings: <code>'pins'</code>, <code>'x'</code>, <code>'y'</code>, <code>'null'</code>, <code>'status'</code>, <code>'isr'</code>, <code>'osr'</code>. Additionally you can use unary operators (<code>'~'</code> and <code>'!'</code> for invert, <code>'::'</code> for bit-reverse) in this <code>src</code> parameter like <code>'!x'</code>, <code>'~y'</code> or <code>'::pins'</code>.</li>
</ul>
<h3 id="asmirqcmd-irqnum-rel" tabindex="-1">asm.irq([cmd ,]irqnum[, rel]) <a class="direct-link" href="#asmirqcmd-irqnum-rel">#</a></h3>
<ul>
<li><strong><code>cmd</code></strong> <code>&lt;string&gt;</code> One of the strings: <code>'set'</code>, <code>'nowait'</code>, <code>'wait'</code>, <code>'clear'</code>.</li>
<li><strong><code>irqnum</code></strong> <code>&lt;number&gt;</code> IRQ number to wait on.</li>
<li><strong><code>rel</code></strong> <code>&lt;string&gt;</code> Use relative IRQ number if <code>'rel'</code> passed.</li>
</ul>
<h3 id="asmsetdst-val" tabindex="-1">asm.set(dst, val) <a class="direct-link" href="#asmsetdst-val">#</a></h3>
<ul>
<li><strong><code>dst</code></strong> <code>&lt;string&gt;</code> One of the strings: <code>'pins'</code>, <code>'x'</code>, <code>'y'</code>, <code>'pindirs'</code>.</li>
<li><strong><code>val</code></strong> <code>&lt;number&gt;</code> </li>
</ul>
<h3 id="asmnop" tabindex="-1">asm.nop() <a class="direct-link" href="#asmnop">#</a></h3>
<p>It means no operation, so it has no side effect.</p>
<h3 id="asmlabelname" tabindex="-1">asm.label(name) <a class="direct-link" href="#asmlabelname">#</a></h3>
<ul>
<li><strong><code>name</code></strong> <code>&lt;string&gt;</code> </li>
</ul>
<p>Creates a label at the position. It can be used as target in <code>jmp()</code>.</p>
<h3 id="asmsideval" tabindex="-1">asm.side(val) <a class="direct-link" href="#asmsideval">#</a></h3>
<ul>
<li><strong><code>val</code></strong> <code>&lt;number&gt;</code> </li>
</ul>
<p>Set side-set value to the latest instruction.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">// .program spi_tx_fast</span><br><span class="token comment">// .side_set 1</span><br><span class="token comment">//</span><br><span class="token comment">// loop:</span><br><span class="token comment">//   out pins, 1 side 0</span><br><span class="token comment">//   jmp loop side 1</span><br><br><span class="token comment">// ASM object corresponds to the above</span><br><span class="token keyword">const</span> asm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ASM</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">sideset</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>asm<br><span class="token punctuation">.</span><span class="token function">label</span><span class="token punctuation">(</span><span class="token string">'loop'</span><span class="token punctuation">)</span><br>  <span class="token punctuation">.</span><span class="token function">out</span><span class="token punctuation">(</span><span class="token string">'pins'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">side</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><br>  <span class="token punctuation">.</span><span class="token function">jmp</span><span class="token punctuation">(</span><span class="token string">'loop'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">side</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="asmdelayval" tabindex="-1">asm.delay(val) <a class="direct-link" href="#asmdelayval">#</a></h3>
<ul>
<li><strong><code>val</code></strong> <code>&lt;number&gt;</code> </li>
</ul>
<p>Set delay value to the latest instruction.</p>
<h3 id="asmwraptarget" tabindex="-1">asm.wrap_target() <a class="direct-link" href="#asmwraptarget">#</a></h3>
<p>Indicates the <code>.wrap_target</code> position of PIO assembly.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">// squarewave_fast.pio</span><br><span class="token comment">// -------------------</span><br><span class="token comment">// .program squarewave_fast</span><br><span class="token comment">//   set pindirs, 1 ; Set pin to output</span><br><span class="token comment">// .wrap_target</span><br><span class="token comment">//   set pins, 1 ; Drive pin high</span><br><span class="token comment">//   set pins, 0 ; Drive pin low</span><br><span class="token comment">// .wrap</span><br><br><span class="token keyword">const</span> squareware_fast_asm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ASM</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>squareware_fast_asm<br>  <span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'pindirs'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><br><span class="token punctuation">.</span><span class="token function">wrap_target</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>  <span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'pins'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><br>  <span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'pins'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><br><span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// You can access wrap_target and wrap offset</span><br>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'wrap_target:'</span><span class="token punctuation">,</span> squareware_fast_asm<span class="token punctuation">.</span>labels<span class="token punctuation">[</span><span class="token string">'wrap_target'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'wrap:'</span><span class="token punctuation">,</span> squareware_fast_asm<span class="token punctuation">.</span>labels<span class="token punctuation">[</span><span class="token string">'wrap'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="asmwrap" tabindex="-1">asm.wrap() <a class="direct-link" href="#asmwrap">#</a></h3>
<p>Indicates the <code>.wrap</code> position of PIO assembly.</p>
<h3 id="asmtobinary" tabindex="-1">asm.toBinary() <a class="direct-link" href="#asmtobinary">#</a></h3>
<ul>
<li><strong>Returns</strong>: <code>&lt;Uint16Array&gt;</code> </li>
</ul>
<p>Returns the encoded binary code from the assembly program.</p>
<h3 id="asmtoinstidx" tabindex="-1">asm.toInst([idx]) <a class="direct-link" href="#asmtoinstidx">#</a></h3>
<ul>
<li><code>idx</code> <code>&lt;number&gt;</code> Index of instruction to export. Default: <code>0</code>.</li>
<li><strong>Returns:</strong> <code>&lt;number&gt;</code></li>
</ul>
<p>Returns an instruction at the specified index from the assembly program.</p>
<h3 id="asmlabels" tabindex="-1">asm.labels <a class="direct-link" href="#asmlabels">#</a></h3>
<ul>
<li><code>&lt;Object&lt;string, number&gt;&gt;</code></li>
</ul>
<p>A map from label name to code offset. You can find <code>'wrap_target'</code> and <code>'wrap'</code> labels if you used.</p>
<h2 id="class-statemachine" tabindex="-1">Class: StateMachine <a class="direct-link" href="#class-statemachine">#</a></h2>
<p>An instance of StateMachine represents a state machine of RP2's PIO (Programmable I/O). You can use total 8 state machines (4 in PIO0 and 4 in PIO1) in RP2.</p>
<h3 id="statemachinegetavailableid" tabindex="-1">StateMachine.getAvailableId() <a class="direct-link" href="#statemachinegetavailableid">#</a></h3>
<ul>
<li><strong>Returns</strong> <code>&lt;number&gt;</code> An available id for state machine.</li>
</ul>
<p>Returns an available id (0~3 for PIO0 and 4~7 for PIO1) for state machine. It returns an id in sequence of 0, 4, 1, 5, 2, 6, 3, 7. If a <code>StateMachine</code> is instantiated with an id, then the id will be removed from the sequence. </p>
<p>It is useful when you writing a library based on PIO so that user don't concerns about assigning an id for state machine.</p>
<h3 id="new-statemachineid-asm-options" tabindex="-1">new StateMachine(id, asm[, options]) <a class="direct-link" href="#new-statemachineid-asm-options">#</a></h3>
<ul>
<li><strong><code>id</code></strong> <code>&lt;number&gt;</code> Id of the state machine. You can use total 8 state machines (0~7).</li>
<li>**<code>asm</code> ** <code>&lt;ASM&gt;</code> An instance of ASM object to be executed by state machine. </li>
<li><strong><code>options</code></strong> <code>&lt;object&gt;</code> An option object.
<ul>
<li><strong><code>freq</code></strong> <code>&lt;number&gt;</code> Default: <code>125000000</code>.</li>
<li><strong><code>inBase</code></strong> <code>&lt;number&gt;</code> Default: <code>-1</code>.</li>
<li><strong><code>inCount</code></strong> <code>&lt;number&gt;</code> Default: <code>1</code>.</li>
<li><strong><code>outBase</code></strong> <code>&lt;number&gt;</code> Default: <code>-1</code>.</li>
<li><strong><code>outCount</code></strong> <code>&lt;number&gt;</code> Default: <code>1</code>. </li>
<li><strong><code>setBase</code></strong> <code>&lt;number&gt;</code> Default: <code>-1</code>. </li>
<li><strong><code>setCount</code></strong> <code>&lt;number&gt;</code> Default: <code>1</code>.</li>
<li><strong><code>sidesetBase</code></strong> <code>&lt;number&gt;</code> Default: <code>-1</code>.</li>
<li><strong><code>jmpPin</code></strong> <code>&lt;number&gt;</code> Default: <code>-1</code>. </li>
<li><strong><code>inShiftDir</code></strong> <code>&lt;number&gt;</code> Default: <code>PIO.SHIFT_RIGHT</code>. </li>
<li><strong><code>autopush</code></strong> <code>&lt;boolean&gt;</code> Default: <code>false</code>. </li>
<li><strong><code>pushThreshold</code></strong> <code>&lt;number&gt;</code> Default: <code>32</code>. </li>
<li><strong><code>outShiftDir</code></strong> <code>&lt;number&gt;</code> Default: <code>PIO.SHIFT_RIGHT</code>. </li>
<li><strong><code>autopull</code></strong> <code>&lt;boolean&gt;</code> Default: <code>false</code>. </li>
<li><strong><code>pullThreshold</code></strong> <code>&lt;number&gt;</code> Default: <code>32</code>. </li>
<li><strong><code>fifoJoin</code></strong> <code>&lt;number&gt;</code> Default: <code>PIO.FIFO_JOIN_NONE</code>. </li>
<li><strong><code>outSticky</code></strong> <code>&lt;boolean&gt;</code> Default: <code>false</code>. </li>
<li><strong><code>outEnablePin</code></strong> <code>&lt;number&gt;</code> Default: <code>-1</code>. </li>
<li><strong><code>movStatusSel</code></strong> <code>&lt;number&gt;</code> Default: <code>PIO.TX_LESSTHAN</code>. </li>
<li><strong><code>movStatusN</code></strong> <code>&lt;number&gt;</code> Default: <code>0</code>. </li>
</ul>
</li>
</ul>
<h3 id="smactivevalue" tabindex="-1">sm.active(value) <a class="direct-link" href="#smactivevalue">#</a></h3>
<ul>
<li><strong><code>value</code></strong> <code>&lt;number&gt;</code></li>
</ul>
<h3 id="smrestart" tabindex="-1">sm.restart() <a class="direct-link" href="#smrestart">#</a></h3>
<p>Restart the state machine.</p>
<h3 id="smexecinst" tabindex="-1">sm.exec(inst) <a class="direct-link" href="#smexecinst">#</a></h3>
<ul>
<li><strong><code>inst</code></strong> <code>&lt;number&gt;</code> An instruction to execute.</li>
</ul>
<p>Execute an PIO instruction.</p>
<pre class="language-javascript"><code class="language-javascript">sm<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ASM</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">out</span><span class="token punctuation">(</span><span class="token string">'pins'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toInst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h3 id="smget" tabindex="-1">sm.get() <a class="direct-link" href="#smget">#</a></h3>
<ul>
<li><strong>Returns</strong>: <code>&lt;number&gt;</code></li>
</ul>
<p>Pull a data from the state machine's RX FIFO.</p>
<h3 id="smputvalue" tabindex="-1">sm.put(value) <a class="direct-link" href="#smputvalue">#</a></h3>
<ul>
<li><strong><code>value</code></strong> <code>&lt;number|Uint32Array&gt;</code></li>
</ul>
<p>Push a number (32bit unsigned integer) or unsigned 32bit integer array to the state machine's TX FIFO.</p>
<h3 id="smsetpinsvalue-mask" tabindex="-1">sm.setPins(value[, mask]) <a class="direct-link" href="#smsetpinsvalue-mask">#</a></h3>
<ul>
<li><strong><code>value</code></strong> <code>&lt;number&gt;</code> A value to set on all (or masked) pins.</li>
<li><strong><code>mask</code></strong> <code>&lt;number&gt;</code> A mask to filter pins to set the value.</li>
</ul>
<p>Set a (32-bit) value on all (or masked) pins using the state machine.</p>
<h3 id="smrxfifo" tabindex="-1">sm.rxfifo() <a class="direct-link" href="#smrxfifo">#</a></h3>
<ul>
<li><strong>Returns</strong>: <code>&lt;number&gt;</code></li>
</ul>
<p>Returns the number of elements in the state machine's RX FIFO. The size of RXFIFO is 0 in the <code>PIO.FIFO_JOIN_TX</code> mode, 4 in the <code>PIO.FIFO_JOIN_NONE</code> mode, 8 in the <code>PIO.FIFO_JOIN_RX</code> mode. This buffer size can be used to check RXFIFO full condition.</p>
<h3 id="smtxfifo" tabindex="-1">sm.txfifo() <a class="direct-link" href="#smtxfifo">#</a></h3>
<ul>
<li><strong>Returns</strong>: <code>&lt;number&gt;</code></li>
</ul>
<p>Returns the number of elements in the state machine's TX FIFO. The size of RXFIFO is 0 in the <code>PIO.FIFO_JOIN_RX</code> mode, 4 in the <code>PIO.FIFO_JOIN_NONE</code> mode, 8 in the <code>PIO.FIFO_JOIN_TX</code> mode. This buffer size can be used to check TXFIFO full condition.</p>
<h3 id="smclearfifos" tabindex="-1">sm.clearFIFOs() <a class="direct-link" href="#smclearfifos">#</a></h3>
<p>Clear the state machine's TX FIFO and RX FIFO.</p>
<h3 id="smdraintxfifo" tabindex="-1">sm.drainTXFIFO() <a class="direct-link" href="#smdraintxfifo">#</a></h3>
<p>Empty out the state machine's TX FIFO.</p>
<h3 id="smirqhandler" tabindex="-1">sm.irq(handler) <a class="direct-link" href="#smirqhandler">#</a></h3>
<ul>
<li><strong><code>handler</code></strong> <code>&lt;Function&gt;</code>
<ul>
<li><strong><code>interrupt</code></strong>  <code>&lt;value&gt;</code>  interrupt value, bit0 is an interrupt to sm0, bit1 is an interrupt to sm1, bit2 is an interrupt to sm2, bit3 is an interrupt to sm3.</li>
</ul>
</li>
</ul>
<p>Binds a IRQ handler for the given PIO. PIO0 if current id is sm0~sm3, PIO1 if current id is sm4~sm7.</p>

        </div>
      </main>
    </div>
  </body>
</html>